{% extends 'base.html' %}

{% block content %}

<div class="row form-group">
    <div class="col form-group">
        <p>
            <label for="name">Name</label>
            <input type="text" class="form-control m-0" id="name" name="name" readonly disabled
                value="{{ reg.fname }} {{ reg.lname }}" />
        </p>
    </div>
    <div class="col form-group">
        <p>
            <label for="sca_name">SCA Name</label>
            <input type="text" class="form-control m-0" id="sca_name" name="sca_name" readonly disabled
                value="{{ reg.scaname }}" />
        </p>
    </div>
    <div class="col form-group">
        <p>
            <label for="sca_name">Age</label>
            <input type="text" class="form-control m-0" id="age" name="age" readonly disabled value="{{ reg.age }}" />
        </p>
    </div>
</div>
<form action="" method="post" novalidate>
    {{ form.hidden_tag() }}
    <div class="row form-group">
        <div class="col form-group">
            <p>
                {{form.notes.label}}
                {{form.notes(class_='form-control m-0')}}
            </p>
        </div>
    </div>
    <br>
    <div class="row form-group">
        <div class="col form-group">
            <p>
                {{ form.mbr.label }}
                {{ form.mbr(class_='form-control m-0', onchange="memberCheck()") }}
            </p>
        </div>
        {% if reg.mbr == True %}
        <div id="membership_number" class="col form-group">
            {% else %}
            <div id="membership_number" class="col form-group" style="display: none;">
                {% endif %}
                <p>
                    {{form.mbr_num.label}}
                    {{form.mbr_num(class_='form-control m-0')}}
                    {% if form.mbr_num.errors %}{% for error in form.mbr_num.errors %}<span class="error">{{ error }}</span>{% endfor %}{% endif %}
                </p>
            </div>
            {% if reg.mbr == True %}
            <div id="membership_exp" class="col form-group">
                {% else %}
                <div id="membership_exp" class="col form-group" style="display: none;">
                    {% endif %}
                    <p>
                        {{form.mbr_num_exp.label}}
                        {{form.mbr_num_exp(class_='form-control m-0')}}
                        {% if form.mbr_num_exp.errors %}{% for error in form.mbr_num_exp.errors %}<span class="error">{{ error }}</span>{% endfor %}{% endif %}
                    </p>
                </div>
            </div>
            <div class="row form-group">
                <div class="col form-group">
                    <p>
                        {{ form.kingdom.label }}
                        {{ form.kingdom(class_='form-control m-0') }}
                        {% if form.kingdom.errors %}{% for error in form.kingdom.errors %}<span class="error">{{ error }}</span>{% endfor %}{% endif %}
                    </p>
                </div>
                <div class="col form-group">
                    <p>
                        {{ form.lodging.label }}
                        {{ form.lodging(class_='form-control m-0') }}
                        {% if form.lodging.errors %}{% for error in form.lodging.errors %}<span class="error">{{ error }}</span>{% endfor %}{% endif %}
                    </p>
                </div>
            </div>
            {% if reg.age != '18+' and reg.age != 'Royals' %}
            <div class="row form-group">
                <div class="col form-group">
                    <p>
                        {{form.minor_waiver.label}}
                        {{form.minor_waiver(class_='form-control m-0')}}
                        {% if form.minor_waiver.errors %}{% for error in form.minor_waiver.errors %}<span class="error">{{ error }}</span>{% endfor %}{% endif %}
                    </p>
                </div>
            </div>
            {% endif %}
            <div class="row form-group">
                <div class="col form-group">
                    <p>
                        {{ form.medallion.label }}
                        {{ form.medallion(class_='form-control m-0') }}
                        {% if form.medallion.errors %}{% for error in form.medallion.errors %}<span class="error">{{ error }}</span>{% endfor %}{% endif %}
                    </p>
                </div>
            </div>
            <div class="row form-group">
                <div class="col form-group">
                    <p>{{ form.submit(class_='form-control m-0 btn btn-lg btn-primary') }}</p>
                </div>
            </div>

</form>

<!-- <h5>Cost</h5>
    <table>
        <tr>
            <th>Registration Price</th>
            <th>Amount Paid</th>
            <th>Amount Due</th>
        </tr>
        <tr>
            <td>{{ price_calc }}</td>
            <td>{{ price_paid }}</td>
            <td>{{ price_due }}</td>
        </tr>
    </table> -->
{% endblock %}

{% block script %}
<!-- <script>
let mbrField = document.getElementById("mbr");
let mbr = '{{ mbr }}';

for(var i, j = 0; i = mbrField.options[j]; j++) {
    if(i.value == mbr) {
        mbrField.selectedIndex = j;
        break;
    }
}
let kingdomField = document.getElementById("kingdom");
let kingdom = '{{ kingdom }}';

for(var i, j = 0; i = kingdomField.options[j]; j++) {
    if(i.value == kingdom) {
        kingdomField.selectedIndex = j;
        break;
    }
} 
</script> -->

<script>


    function memberCheck() {
        const mbr = document.getElementById("mbr").value;
        const membership_number = document.getElementById("membership_number");
        const membership_exp = document.getElementById("membership_exp");
        if (mbr == 'Member') {
            membership_number.style.display = 'block';
            membership_exp.style.display = 'block';
        }
        else {
            membership_number.style.display = 'none';
            membership_exp.style.display = 'none';
        }
    }

</script>
{% endblock %}